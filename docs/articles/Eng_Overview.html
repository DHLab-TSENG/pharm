<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Eng_Overview • pharm</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Eng_Overview" />
<meta property="og:description" content="pharm" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pharm</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/DHLab-TSENG/pharm/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<script src="Eng_Overview_files/header-attrs-2.7/header-attrs.js"></script>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Eng_Overview</h1>
                        <h4 class="author">Yeh-Yung, Chiu</h4>
            
            <h4 class="date">2021-05-28</h4>
      
      <small class="dont-index">Source: <a href='https://github.com/DHLab-TSENG/pharm/blob/master/vignettes/Eng_Overview.Rmd'><code>vignettes/Eng_Overview.Rmd</code></a></small>
      <div class="hidden name"><code>Eng_Overview.Rmd</code></div>

    </div>

    
    
<div id="development-format" class="section level2">
<h2>Development Format</h2>
<div id="install-version" class="section level3">
<h3>Install Version</h3>
<p>Please install the latest Pharm package.</p>
</div>
<div id="sample-data" class="section level3">
<h3>Sample Data</h3>
<p>A sample data rda file <code>sample_data_subset</code> is included in Pharm package:</p>
<p>The way to generate the data table <code>sample_data</code> is to de-identify the source data which is from the US real medication records. Then, resort the order of patient Id in the original data, and time-shift the date of each administration. Next, replace the NDC in part of the administration record which has the same drug but different NDC, which means that the NDC of the drug is different in the NDC history. As a result of the data, a total of 2,747,617 dosing records and 39,989 Id numbers from different patients were generated.</p>
<p>The sample data <code>sample_data_subset</code> used in the function demonstration of this package is a subset of <code>sample_data</code> which is <code>SELECT FROM MemberId = 1 AND MemberId = 42</code>. For the field information in the data set:</p>
<ul>
<li><code>MemberId</code> patient Id</li>
<li><code>DispenseDate</code> patient`s drug dispensed date, and the time interval is from 2025-12-06 to 2038-01-25</li>
<li><code>NationalDrugCode</code> drug NDC, total of 17,326 different drug codes</li>
<li><code>Quantity</code> quantity of patient`s drug dispensed</li>
<li><code>DaysSupply</code> days of patient`s drug dispensed</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(sample_data_subset)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">MemberId</th>
<th align="left">DispenseDate</th>
<th align="left">NationalDrugCode</th>
<th align="right">Quantity</th>
<th align="right">DaysSupply</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">2031-12-01</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">2032-01-31</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">2032-03-25</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
</tr>
<tr class="even">
<td align="right">42</td>
<td align="left">2032-01-05</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
</tr>
<tr class="odd">
<td align="right">42</td>
<td align="left">2032-03-07</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
</tr>
<tr class="even">
<td align="right">42</td>
<td align="left">2032-04-30</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
</tr>
<tr class="odd">
<td align="right">42</td>
<td align="left">2032-03-08</td>
<td align="left">00006504031</td>
<td align="right">90</td>
<td align="right">90</td>
</tr>
<tr class="even">
<td align="right">42</td>
<td align="left">2032-04-25</td>
<td align="left">00006504031</td>
<td align="right">90</td>
<td align="right">90</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="i.-get-drug-ingredient-via-indication" class="section level2">
<h2>I. Get Drug Ingredient Via Indication</h2>
<div id="get-rxcui-via-maytreat" class="section level3">
<h3><strong>1. Get RxCui Via Maytreat</strong></h3>
<p>The source data is from the U.S. Veterans Administration’s <code>MED-RT</code> database to establish this function. User can get the RxCui of all drug ingredients for the treatment by input the indication.</p>
<p>Exmaple: User input the indication <code>esophagitis</code>, the RxCui of all drug ingredients for the treatment can be obtained and stored in the new data table <code>Esophagitis_List</code>. For the field information in the data set:</p>
<ul>
<li><code>RxCui</code> drug RxCui</li>
<li><code>Name</code> drug name</li>
<li><code>MinCooncept.Id</code> indication Id</li>
<li><code>MinConcept.Name</code> indication name</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>Esophagitis_List <span class="ot">&lt;-</span> <span class="fu">getRxCuiViaMayTreat</span>(<span class="st">&quot;esophagitis&quot;</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(Esophagitis_List)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">RxCui</th>
<th align="left">Name</th>
<th align="left">MinConcept.Id</th>
<th align="left">MinConcept.Name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1792108</td>
<td align="left">Omeprazole Sodium</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
</tr>
<tr class="even">
<td align="left">236486</td>
<td align="left">Omeprazole magnesium</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
</tr>
<tr class="odd">
<td align="left">7646</td>
<td align="left">Omeprazole</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
</tr>
<tr class="even">
<td align="left">10156</td>
<td align="left">Sucralfate</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
</tr>
<tr class="odd">
<td align="left">1487143</td>
<td align="left">sucralfate malate</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
</tr>
<tr class="even">
<td align="left">17128</td>
<td align="left">lansoprazole</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
</tr>
</tbody>
</table>
</div>
<div id="get-sbd-scd-rxcui-via-rxcui" class="section level3">
<h3><strong>2. Get SBD SCD RxCui Via RxCui</strong></h3>
<p>After obtaining the data table of all drug ingredients for the treatment <code>Esophagitis_List</code>, user can get all the pharmaceutical brands and clinical drugs which has contained these drug ingredients by input the data table <code>Esophagitis_List</code>.</p>
<p>Exmaple: User input the data table <code>Esophagitis_List</code>, the converted SBD or SCD RxCui can be obtained and stored in the new data table <code>Esophagitis_SBD_SCD_List</code>. For the field information in the data set:</p>
<ul>
<li><code>RxCui</code> drug RxCui</li>
<li><code>Name</code> drug name</li>
<li><code>MinCooncept.Id</code> indication Id</li>
<li><code>MinConcept.Name</code> indication name</li>
<li><code>SBD.rxcui</code> drug SBD RxCui</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>Esophagitis_SBD_SCD_List <span class="ot">&lt;-</span> <span class="fu">getSBDRxCuiViaRxCui</span>(<span class="at">df =</span> Esophagitis_List[<span class="dv">3</span>,],</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>                                                    <span class="at">RxCuiColName =</span> RxCui,</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>                                                    <span class="at">cores =</span> <span class="dv">2</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(Esophagitis_SBD_SCD_List)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">RxCui</th>
<th align="left">Name</th>
<th align="left">MinConcept.Id</th>
<th align="left">MinConcept.Name</th>
<th align="left">SBD.rxcui</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">7646</td>
<td align="left">Omeprazole</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
<td align="left">2262026</td>
</tr>
<tr class="even">
<td align="left">7646</td>
<td align="left">Omeprazole</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
<td align="left">2003656</td>
</tr>
<tr class="odd">
<td align="left">7646</td>
<td align="left">Omeprazole</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
<td align="left">198051</td>
</tr>
<tr class="even">
<td align="left">7646</td>
<td align="left">Omeprazole</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
<td align="left">199119</td>
</tr>
<tr class="odd">
<td align="left">7646</td>
<td align="left">Omeprazole</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
<td align="left">389171</td>
</tr>
<tr class="even">
<td align="left">7646</td>
<td align="left">Omeprazole</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
<td align="left">389172</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="ii.-drug-code-integration" class="section level2">
<h2>II. Drug Code Integration</h2>
<p>Pharm package provides the following drug code conversion:</p>
<ul>
<li>U.S. National Drug Code(NDC)</li>
<li>NLM RxNorm(RxCui)</li>
<li>Semantic Branded Drug(SBD) or Semantic Clinical Drug(SCD)</li>
<li>WHO Anatomical Therapeutic Chemical Classification System(ATC)</li>
<li>Taiwan Health Insurance drug code(NHINo)</li>
<li>Hospital Code(HC)</li>
<li>Chang Gung Medical Hospital drug code(RCFNo)</li>
</ul>
<div id="ndc-and-rxcui-conversion" class="section level3">
<h3><strong>1. NDC and RxCui conversion</strong></h3>
<div id="get-ndc-via-sbd-rxcui" class="section level4">
<h4><strong>1.1. Get NDC via SBD RxCui</strong></h4>
<p>After obtaining the data table of all drug ingredient SBD or SCD RxCui <code>Esophagitis_SBD_SCD_List</code>, user can get NDC which has contained these drug ingredients by input the data table <code>Esophagitis_SBD_SCD_List</code>. However, a drug will have different packaging and NDC because it comes from different pharmaceutical brands. There will be different NDC for the same drug type but different packaging. Hence, the output results will be one-to-many. A drug RxCui will matche to multiple NDC of pharmaceutical brands, and no corresponding NDC will be<code>NA</code>. This function provides user to get NDC via SBD or SCD RxCui.</p>
<p>Exmaple: User input the data table <code>Esophagitis_SBD_SCD_List</code>, the converted NDC can be obtained and stored in the new data table <code>Esophagitis_NDC_List</code>. For the field information in the data set:</p>
<ul>
<li><code>RxCui</code> drug RxCui</li>
<li><code>Name</code> drug name</li>
<li><code>MinCooncept.Id</code> indication Id</li>
<li><code>MinConcept.Name</code> indication name</li>
<li><code>SBD.rxcui</code> drug SBD RxCui</li>
<li><code>NDC</code> drug NDC</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>Esophagitis_NDC_List <span class="ot">&lt;-</span> <span class="fu">getNDCViaSBDRxCui</span>(<span class="at">df =</span> Esophagitis_SBD_SCD_List[<span class="dv">1</span>,],</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">SBDRxCuiColName =</span> SBD.rxcui,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">cores =</span> <span class="dv">2</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(Esophagitis_NDC_List)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">RxCui</th>
<th align="left">Name</th>
<th align="left">MinConcept.Id</th>
<th align="left">MinConcept.Name</th>
<th align="left">SBD.rxcui</th>
<th align="left">NDC</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">7646</td>
<td align="left">Omeprazole</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
<td align="left">2262026</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
</div>
<div id="get-rxcui-via-ndc" class="section level4">
<h4><strong>1.2. Get RxCui via NDC</strong></h4>
<p>After obtaining the data table of sample data <code>sample_data_subset</code>, user can get RxCui which has contained these drug ingredients by input the data table <code>sample_data_subset</code>.</p>
<p>Exmaple: User input the data table <code>sample_data_subset</code>, the converted RxCui can be obtained and stored in the new data table <code>sample_data_subset_rxcui</code>. For the field information in the data set:</p>
<ul>
<li><code>MemberId</code> patient Id</li>
<li><code>DispenseDate</code> patient`s drug dispensed date, and the time interval is from 2025-12-06 to 2038-01-25</li>
<li><code>NationalDrugCode</code> drug NDC, total of 17,326 different drug codes</li>
<li><code>Quantity</code> quantity of patient`s drug dispensed</li>
<li><code>DaysSupply</code> days of patient`s drug dispensed</li>
<li><code>RxCui</code> drug RxCui</li>
<li><code>ndcStatus</code> drug NDC status</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>sample_data_subset_rxcui <span class="ot">&lt;-</span> <span class="fu">getRxCuiViaNDC</span>(<span class="at">df =</span> sample_data_subset,</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>                                            <span class="at">NdcColName =</span> NationalDrugCode)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(sample_data_subset_rxcui))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">MemberId</th>
<th align="left">DispenseDate</th>
<th align="left">NationalDrugCode</th>
<th align="right">Quantity</th>
<th align="right">DaysSupply</th>
<th align="left">RxCui</th>
<th align="left">ndcStatus</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">2031-12-01</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="left">606731</td>
<td align="left">ACTIVE</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">2032-01-31</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="left">606731</td>
<td align="left">ACTIVE</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">2032-03-25</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="left">606731</td>
<td align="left">ACTIVE</td>
</tr>
<tr class="even">
<td align="right">42</td>
<td align="left">2032-01-05</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="left">606731</td>
<td align="left">ACTIVE</td>
</tr>
<tr class="odd">
<td align="right">42</td>
<td align="left">2032-03-07</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="left">606731</td>
<td align="left">ACTIVE</td>
</tr>
<tr class="even">
<td align="right">42</td>
<td align="left">2032-04-30</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="left">606731</td>
<td align="left">ACTIVE</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="rxcui-and-atc-conversion" class="section level3">
<h3><strong>2. RxCui and ATC conversion</strong></h3>
<div id="get-atc-via-rxcui" class="section level4">
<h4><strong>2.1. Get ATC via RxCui</strong></h4>
<p>WHO Collaborating Center for Drug Statistics Methodology, ATC classification index with DDDs, 2019. Oslo, Norway 2018. After obtaining the data table <code>sample_data_subset_rxcui</code>, user can get ATC which has contained these drug ingredients by input the data table <code>sample_data_subset_rxcui</code>. However, the same drug components in ATC might depend on different ATC medication route. Hence, this function also refer to the research of <a href="https://www.researchgate.net/publication/276067397_Analyzing_US_prescription_lists_with_RxNorm_and_the_ATCDDD_Index">Bodenreider et al.</a> and adds the parameter <code>MatchRoute</code> for user to consider. If user wants to consider and compare the ATC medication route, input <code>TRUE</code> in the parameter MatchRoute, otherwise input <code>FALSE</code>.</p>
<p>Exmaple: User input the data table <code>sample_data_subset_rxcui</code> and compare the drug route <code>MatchRoute = False</code>, the converted ATC can be obtained and stored in the new data table <code>sample_data_subset_atc</code>. For the field information in the data set:</p>
<ul>
<li><code>MemberId</code> patient Id</li>
<li><code>DispenseDate</code> patient`s drug dispensed date, and the time interval is from 2025-12-06 to 2038-01-25</li>
<li><code>NationalDrugCode</code> drug NDC, total of 17,326 different drug codes</li>
<li><code>Quantity</code> quantity of patient`s drug dispensed</li>
<li><code>DaysSupply</code> days of patient`s drug dispensed</li>
<li><code>RxCui</code> drug RxCui</li>
<li><code>ATC</code> drug ATC</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>sample_data_subset_atc <span class="ot">&lt;-</span> <span class="fu">getATCViaRxCui</span>(<span class="at">df =</span> sample_data_subset_rxcui,</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">RxCuiColName =</span> RxCui,</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">cores =</span> <span class="dv">2</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">MatchRoute =</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(sample_data_subset_atc)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="get-rxcui-via-atc" class="section level4">
<h4><strong>2.2. Get RxCui via ATC</strong></h4>
<p>User can get RxCui which has contained these drug ingredients by input the data table <code>sample_ATC</code>.</p>
<p>Exmaple: User input the data table <code>sample_ATC</code>, the converted RxCui can be obtained and stored in the new data table <code>sample_atc_rxcui</code>. For the field information in the data set:</p>
<ul>
<li><code>RxCui</code> drug RxCui</li>
<li><code>ATC</code> drug ATC</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>sample_atc_rxcui <span class="ot">&lt;-</span> <span class="fu">getRxCuiViaATC</span>(<span class="at">df =</span> sample_ATC,</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">AtcColName =</span> ATC,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">cores =</span> <span class="dv">2</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(sample_atc_rxcui)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">ATC</th>
<th align="left">RxCui</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">G04BX06</td>
<td align="left">8120</td>
</tr>
<tr class="even">
<td align="left">D06AX02</td>
<td align="left">2348</td>
</tr>
<tr class="odd">
<td align="left">C01DA02</td>
<td align="left">4917</td>
</tr>
<tr class="even">
<td align="left">G03AB01</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">A12CC05</td>
<td align="left">142131</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="taiwan-drug-code-conversion" class="section level3">
<h3><strong>3. Taiwan Drug Code conversion</strong></h3>
<div id="get-nhino-via-hc" class="section level4">
<h4><strong>3.1. Get NHINo via HC</strong></h4>
<p>User can get NHINo which has contained these drug ingredients by input HC, and no corresponding NHINo will be<code>NA</code>.</p>
</div>
<div id="get-nhino-via-rcfno" class="section level4">
<h4><strong>3.2. Get NHINo via RCFNo</strong></h4>
<p>User can get NHINo which has contained these drug ingredients by input the data table <code>sample_taiwan_drug</code>, and no corresponding NHINo will be<code>NA</code>.</p>
<p>Exmaple: User input the data table <code>sample_taiwan_drug</code>, the converted NHINo can be obtained. For the field information in the data set:</p>
<ul>
<li><code>CGMH_CODE</code> Chang Gung Medical Hospital drug code RCFNo</li>
<li><code>NHINO1</code> drug NHINo</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">getNHINoViaRCFNo</span>(<span class="at">df =</span> sample_taiwan_drug, </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>                      <span class="at">RCFNoColName =</span> CGMH_CODE)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">CGMH_CODE</th>
<th align="left">NHINO1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">P6A780M</td>
<td align="left">BC26139100</td>
</tr>
<tr class="even">
<td align="left">P6A022E</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">P6A741M</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">P6A674M</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">PBA024P</td>
<td align="left">N002967209</td>
</tr>
<tr class="even">
<td align="left">PBA024P</td>
<td align="left">A010784209</td>
</tr>
</tbody>
</table>
</div>
<div id="get-atc-via-nhino" class="section level4">
<h4><strong>3.3. Get ATC via NHINO</strong></h4>
<p>User can get ATC which has contained these drug ingredients by input the data table <code>sample_nhino_code</code>, and no corresponding ATC will be<code>NA</code>.</p>
<p>Exmaple: User input the data table <code>sample_nhino_code</code>, the converted ATC can be obtained. For the field information in the data set:</p>
<ul>
<li><code>NHINo</code> drug NHINo</li>
<li><code>ATC_CODE</code> drug ATC</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">getATCViaNHINo</span>(<span class="at">df =</span> sample_nhino_code,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">NHINoColName =</span> NHINo)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">NHINo</th>
<th align="left">ATC_CODE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">BC26139100</td>
<td align="left">L02BX03</td>
</tr>
<tr class="even">
<td align="left">A014118335</td>
<td align="left">D07XB01</td>
</tr>
<tr class="odd">
<td align="left">BC26359100</td>
<td align="left">L01XE18</td>
</tr>
<tr class="even">
<td align="left">BC25224100</td>
<td align="left">C01BD07</td>
</tr>
<tr class="odd">
<td align="left">AC22049209</td>
<td align="left">R06AA02</td>
</tr>
<tr class="even">
<td align="left">AC45972100</td>
<td align="left">R06AX27</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="iii.-calculate-drug-data" class="section level2">
<h2>III. Calculate Drug Data</h2>
<div id="generate-drug-era" class="section level3">
<h3><strong>1. Generate Drug Era</strong></h3>
<p>This can be used to merge pharmacy claims data into drug era with defined window and Exposure days will be cacluated, too. An event of the time interval is according to the prescription’s dispense date plus the prescription’s drug supply days. This function provides user to concatenate continuous prescription medications into a single prescription length. There are two calculation models:</p>
<p>1.If the time interval gap between the patient taking the drug exceeds the persistent window, these two events are regarded as two different drug era. 2.If the time interval gap between the patient taking the drug less than the persistent window, these two events are regarded as same drug era.</p>
<p>Example: As the picture 1,Event 1 and Event 2 are less than the defined gap length, so they are regarded as the same Drug Era. In the other hand, Event 2 and Event 3 are greater than the defined gap, so the gap length is regarded as different Drug Era. For the field information in the data set:</p>
<ul>
<li><code>MemberId</code> patient Id</li>
<li><code>DispenseDate</code> patient`s drug dispensed date, and the time interval is from 2025-12-06 to 2038-01-25</li>
<li><code>NationalDrugCode</code> drug NDC, total of 17,326 different drug codes</li>
<li><code>Quantity</code> quantity of patient`s drug dispensed</li>
<li><code>DaysSupply</code> days of patient`s drug supplied</li>
<li><code>Drug Era</code> drug era</li>
<li><code>Drug Era Start Date</code> the begin date to calculate drug era</li>
<li><code>Drug Era End Date</code> the end date to calculate drug era</li>
<li><code>Gap</code> the time interval of drug dispensed date</li>
<li><code>Exposure Days</code> the date of drug era</li>
<li><code>Supply Days</code> the days of drug era that patient`s drug supplied</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">getDrugEra</span>(<span class="at">MemberIDColName =</span> MemberId,</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>                         sample_data_subset,</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>                         <span class="at">DrugColName =</span> NationalDrugCode,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>                         <span class="at">DispenseDateColName =</span> DispenseDate,</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>                         <span class="at">DaysSupplyColName =</span> DaysSupply))</span></code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="7%" />
<col width="10%" />
<col width="13%" />
<col width="7%" />
<col width="8%" />
<col width="6%" />
<col width="13%" />
<col width="11%" />
<col width="3%" />
<col width="10%" />
<col width="8%" />
</colgroup>
<thead>
<tr class="header">
<th align="right">MemberId</th>
<th align="left">DispenseDate</th>
<th align="left">NationalDrugCode</th>
<th align="right">Quantity</th>
<th align="right">DaysSupply</th>
<th align="right">DrugEra</th>
<th align="left">DrugEraStartDate</th>
<th align="left">DrugEraEndDate</th>
<th align="right">Gap</th>
<th align="left">ExposureDays</th>
<th align="right">SupplyDays</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">2031-12-01</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="right">1</td>
<td align="left">2031-12-01</td>
<td align="left">2031-12-31</td>
<td align="right">0</td>
<td align="left">30 days</td>
<td align="right">30</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">2032-01-31</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="right">2</td>
<td align="left">2032-01-31</td>
<td align="left">2032-04-24</td>
<td align="right">0</td>
<td align="left">84 days</td>
<td align="right">60</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">2032-03-25</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="right">2</td>
<td align="left">2032-01-31</td>
<td align="left">2032-04-24</td>
<td align="right">24</td>
<td align="left">84 days</td>
<td align="right">60</td>
</tr>
<tr class="even">
<td align="right">42</td>
<td align="left">2032-03-08</td>
<td align="left">00006504031</td>
<td align="right">90</td>
<td align="right">90</td>
<td align="right">1</td>
<td align="left">2032-03-08</td>
<td align="left">2032-07-24</td>
<td align="right">0</td>
<td align="left">138 days</td>
<td align="right">180</td>
</tr>
<tr class="odd">
<td align="right">42</td>
<td align="left">2032-04-25</td>
<td align="left">00006504031</td>
<td align="right">90</td>
<td align="right">90</td>
<td align="right">1</td>
<td align="left">2032-03-08</td>
<td align="left">2032-07-24</td>
<td align="right">-42</td>
<td align="left">138 days</td>
<td align="right">180</td>
</tr>
<tr class="even">
<td align="right">42</td>
<td align="left">2032-01-05</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="right">1</td>
<td align="left">2032-01-05</td>
<td align="left">2032-02-04</td>
<td align="right">0</td>
<td align="left">30 days</td>
<td align="right">30</td>
</tr>
<tr class="odd">
<td align="right">42</td>
<td align="left">2032-03-07</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="right">2</td>
<td align="left">2032-03-07</td>
<td align="left">2032-05-30</td>
<td align="right">0</td>
<td align="left">84 days</td>
<td align="right">60</td>
</tr>
<tr class="even">
<td align="right">42</td>
<td align="left">2032-04-30</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="right">2</td>
<td align="left">2032-03-07</td>
<td align="left">2032-05-30</td>
<td align="right">24</td>
<td align="left">84 days</td>
<td align="right">60</td>
</tr>
</tbody>
</table>
</div>
<div id="define-ddds" class="section level3">
<h3><strong>2. Define DDDs</strong></h3>
<div id="calculate-ddds-in-rxcui" class="section level4">
<h4><strong>2.1. Calculate DDDs in RxCui</strong></h4>
<p>User can calculate DDDs in RxCui via the daily amount of drug taken by the patient.</p>
<p>The calculation model:</p>
<p>The dosage of the drug multiplied by the number of the days of drug taken, and then divided by the number of days of drug supplied.</p>
<p>Example: User input the data table <code>sample_data_subset_atc</code>. For the field information in the data set:</p>
<ul>
<li><code>MemberId</code> patient Id</li>
<li><code>DispenseDate</code> patient`s drug dispensed date, and the time interval is from 2025-12-06 to 2038-01-25</li>
<li><code>NationalDrugCode</code> drug NDC, total of 17,326 different drug codes</li>
<li><code>Quantity</code> quantity of patient`s drug dispensed</li>
<li><code>DaysSupply</code> days of patient`s drug supplied</li>
<li><code>RxCui</code> drug RxCui</li>
<li><code>ATC</code> drug ATC</li>
<li><code>DailyDosage</code> drug DDDs</li>
<li><code>Unit</code> drug unit</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>sample_data_subset_atc <span class="ot">&lt;-</span> <span class="fu">calDDDsViaRxCui</span>(<span class="at">df =</span> sample_data_subset_atc, </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">RxCuiColName =</span> RxCui, </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">QuantityColName =</span> Quantity, </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">DaysSupplyColName =</span> DaysSupply, </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">cores =</span> <span class="dv">2</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(sample_data_subset_atc)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="calculate-subjects-accumulated-ddds" class="section level4">
<h4><strong>2.2. Calculate subjects’ accumulated DDDs</strong></h4>
<p>User can calculate patient total amount of DDDs for accumulation medication time by input the data table <code>sample_data_subset_atc</code>.</p>
<p>Example: User input the data table <code>sample_data_subset_atc</code>. For the field information in the data set:</p>
<ul>
<li><code>MemberId</code> patient Id</li>
<li><code>DDDs</code> accumulated DDDs</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>accumulat_DDD <span class="ot">&lt;-</span> <span class="fu">calDDDsAccumulation</span>(<span class="at">case =</span> sample_data_subset_atc, </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">PatientIdColName =</span> MemberId,</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">DispensingColName =</span> DispenseDate,</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">AtcCodeColName =</span> ATC,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">DailyDosageColName =</span> DailyDosage,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">DurationColName =</span> DaysSupply)</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(accumulat_DDD)</span></code></pre></div>
</div>
<div id="calculate-subjects-accumulated-ddds-in-custom-interval-period" class="section level4">
<h4><strong>2.3 Calculate subjects’ accumulated DDDs in custom interval period</strong></h4>
<p>User can calculate the total amount of DDDs accumulated by the patient in a custom interval period <code>index day</code> or specific date .</p>
<p>Example: User input the data table <code>sample_data_subset_atc</code>. For the field information in the data set:</p>
<ul>
<li><code>MemberId</code> patient Id</li>
<li><code>Start_day</code> the begin date of patient take medicine</li>
<li><code>Index_Day</code> the begin date of calculating the DDDs</li>
<li><code>End_day</code> the end date of patient take medicine</li>
<li><code>DDDs_Before_15_Days</code> calculate DDDs in custom time interval before index 15 day</li>
<li><code>DDDs_After_30_Days</code> calculate DDDs in custom time interval after index 30 day</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>index_DDD <span class="ot">&lt;-</span> <span class="fu">calDDDsRange</span>(<span class="at">case =</span> sample_data_subset_atc,</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>                           <span class="at">index_dayColName =</span> Index_Day,</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>                           <span class="at">expo_range_before =</span> <span class="dv">15</span>,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>                           <span class="at">expo_range_after =</span> <span class="dv">30</span>,</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>                           <span class="at">idColName =</span> MemberId,</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>                           <span class="at">AtcCodeColName =</span> ATC,</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>                           <span class="at">DispenseDateColName =</span> DispenseDate,</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>                           <span class="at">DaysSupplyColName =</span> DaysSupply,</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>                           <span class="at">DailyDosageColName =</span> DailyDosage)</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(index_DDD)</span></code></pre></div>
</div>
</div>
</div>
<div id="iv.-visulization" class="section level2">
<h2>IV. Visulization</h2>
<p>The visualization of the data analyzed results can help user quickly understand the content of the data as well as analysis results. In addition, plots can also quickly see the distribution of drug categories in the data, present the results of drug era analysis and the drug history of individual patients.</p>
<div id="atc-distribution-plot" class="section level3">
<h3><strong>1. ATC distribution plot</strong></h3>
<p>User can get DDDs in ATC level 1 or 2 histogram plot. A parameter <code>level</code> is provided that user can choose which level to draw whether the first-order or second-order distribution of ATC. Then, show the plot of its distribution in bar chart.</p>
<p>Example: User input the data table <code>sample_data_ATC1LevelPlot</code>. For the field information in the data set:</p>
<ul>
<li><code>count</code> ?</li>
<li><code>ATC1Level</code> ATC level 1, the first-order distribution of ATC</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 一階分布</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">getATCLevelPlot</span>(<span class="at">df =</span> sample_data_ATC1LevelPlot, </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">ATCColName =</span> ATC, </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">level =</span> <span class="dv">1</span>)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 二階分布</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="fu">get.ATC1LevelPlot</span>(<span class="at">df =</span> sample_data_ATC1LevelPlot, </span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>                  <span class="at">ATCColName =</span> ATC, </span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>                  <span class="at">level =</span> <span class="dv">2</span>)</span></code></pre></div>
</div>
<div id="drug-era-plot" class="section level3">
<h3><strong>2. drug era plot</strong></h3>
<p>User can get the visualized result of the drug era calculated by <code>get.DrugEra</code>. User has to consider different drug, drug era, supplied days, and the distribution of the dospensing drug. Then, show the plot that distribution of the patient`s dispensing drug times in bar chart.</p>
<p>Example: User input the data table <code>sample_data_DrugEraPlot</code>. For the field information in the data set:</p>
<ul>
<li><code>Drug Era</code></li>
<li><code>Total Supply Days</code></li>
</ul>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getDrugEraPlot</span>(<span class="at">df =</span> sample_data_DrugEraPlot,</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">MemberIDColName =</span> MemberId,</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">DrugColName =</span> ATC,</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">DrugEraColName =</span> DrugEra,</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">SupplyDaysColName =</span> SupplyDays)</span></code></pre></div>
</div>
<div id="dispensing-drug-history-plot" class="section level3">
<h3><strong>3. dispensing drug history plot</strong></h3>
<p>User can get specific patient`s drug history plot in bar chart. In addition, user can also get separately sub-plots of different drug history.</p>
<p>Example: User input the data table <code>sample_data_ATC1LevelPlot</code>. For the field information in the data set:</p>
<ul>
<li><code>Dispensing Time</code> interval time of the patient dispensing time</li>
<li><code>Date</code></li>
</ul>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getDispensingPlot</span>(<span class="at">df =</span> sample_data_subset, </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">MemberIDColName =</span> MemberId,</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">DrugColName =</span> NationalDrugCode,</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">DispenseDateColName =</span> Dispensing,</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>                   <span class="at">Member =</span> <span class="dv">42</span>, </span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>                   <span class="at">TimeInterval =</span> <span class="dv">20</span>, </span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>                   <span class="at">Unit =</span> day)</span></code></pre></div>
</div>
</div>
<div id="reference" class="section level2">
<h2>Reference</h2>
<p><strong>Bodenreider et al.</strong> <a href="https://www.researchgate.net/publication/276067397_Analyzing_US_prescription_lists_with_RxNorm_and_the_ATCDDD_Index" class="uri">https://www.researchgate.net/publication/276067397_Analyzing_US_prescription_lists_with_RxNorm_and_the_ATCDDD_Index</a></p>
<p><strong>RxNorm API</strong> In addition to providing RxNav which can use on the web, National Library of Medicine (NLM) also provides APIs for users to obtain specific drug-related information which in NLM’s integrated drug vocabulary.</p>
<ul>
<li>U.S.National Library of Medicine(2019-2021): <a href="https://rxnav.nlm.nih.gov/RxNormAPIs.html" class="uri">https://rxnav.nlm.nih.gov/RxNormAPIs.html</a></li>
</ul>
<p><strong>ATC Database for Classification of Drugs and Pharmacological Treatments</strong></p>
<ul>
<li><p>WHO Collaborating Center for Drug Statistics Methodology, ATC classification index with DDDs, 2019. Oslo, Norway 2018: <a href="https://www.whocc.no/atc_ddd_index/" class="uri">https://www.whocc.no/atc_ddd_index/</a></p></li>
<li><p>Taiwan Food and Drug Administration(2019):</p></li>
</ul>
<p><strong>Chang Gung Medical drug code</strong></p>
<ul>
<li>Chang Gung Medical Research Database</li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc">
      <h2 data-toc-skip>Contents</h2>
    </nav>
      </div>

</div>



      <footer>
      <div class="copyright">
  <p>Developed by YEHYUNG CHIU.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>
