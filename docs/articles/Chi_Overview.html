<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chi_Overview • pharm</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Chi_Overview">
<meta property="og:description" content="pharm">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pharm</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/DHLab-TSENG/pharm/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="Chi_Overview_files/header-attrs-2.7/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Chi_Overview</h1>
                        <h4 class="author">Yeh-Yung, Chiu</h4>
            
            <h4 class="date">2021-06-25</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/DHLab-TSENG/pharm/blob/master/vignettes/Chi_Overview.Rmd"><code>vignettes/Chi_Overview.Rmd</code></a></small>
      <div class="hidden name"><code>Chi_Overview.Rmd</code></div>

    </div>

    
    
<div id="使用手冊" class="section level2">
<h2 class="hasAnchor">
<a href="#%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8A" class="anchor"></a>使用手冊</h2>
<div id="套件版本" class="section level3">
<h3 class="hasAnchor">
<a href="#%E5%A5%97%E4%BB%B6%E7%89%88%E6%9C%AC" class="anchor"></a>套件版本</h3>
<p>使用者請先安裝本套件的最新版本。</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"DHLab-TSENG/pharm"</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dhlab-tseng.github.io/pharm/">pharm</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></code></pre></div>
</div>
<div id="範例資料" class="section level3">
<h3 class="hasAnchor">
<a href="#%E7%AF%84%E4%BE%8B%E8%B3%87%E6%96%99" class="anchor"></a>範例資料</h3>
<p><code>sample_data</code>資料內容的生成方式為，先將來源資料-美國真實給藥紀錄去識別化，對原始資料的病患編碼重新編排順序，並將每筆給藥日期做時間推移。再將部份給藥紀錄中的NDC替換為相同藥物但不同的NDC，意指該藥物的NDC編碼歷史中不同的NDC編碼。最終資料結果，共產生2,747,617筆給藥紀錄，39,989筆病患編號，分別來自於不同的病人。</p>
<p>本套件功能演示所使用的資料內容<code>sample_data_subset</code>，是由<code>sample_data</code>資料中<code>MemberId</code>病患編號 = 1 AND 42 select出的資料子集。資料欄位如下:</p>
<ul>
<li>
<code>MemberId</code> 病患編號</li>
<li>
<code>DispenseDate</code> 配藥日期，時間區間為 2025-12-06 至 2038-01-25</li>
<li>
<code>NationalDrugCode</code> 藥物的美國藥物編碼(NDC)，共17,326種不同的藥物編碼</li>
<li>
<code>Quantity</code> 配藥數量</li>
<li>
<code>DaysSupply</code> 藥物供給天數</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="st">"~/GitHub/pharm/data/sample_data_subset.rda"</span><span class="op">)</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">sample_data_subset</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">MemberId</th>
<th align="left">DispenseDate</th>
<th align="left">NationalDrugCode</th>
<th align="right">Quantity</th>
<th align="right">DaysSupply</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">2031-12-01</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">2032-01-31</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">2032-03-25</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
</tr>
<tr class="even">
<td align="right">42</td>
<td align="left">2032-01-05</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
</tr>
<tr class="odd">
<td align="right">42</td>
<td align="left">2032-03-07</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
</tr>
<tr class="even">
<td align="right">42</td>
<td align="left">2032-04-30</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
</tr>
<tr class="odd">
<td align="right">42</td>
<td align="left">2032-03-08</td>
<td align="left">00006504031</td>
<td align="right">90</td>
<td align="right">90</td>
</tr>
<tr class="even">
<td align="right">42</td>
<td align="left">2032-04-25</td>
<td align="left">00006504031</td>
<td align="right">90</td>
<td align="right">90</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="一適應症查詢藥物功能" class="section level2">
<h2 class="hasAnchor">
<a href="#%E4%B8%80%E9%81%A9%E6%87%89%E7%97%87%E6%9F%A5%E8%A9%A2%E8%97%A5%E7%89%A9%E5%8A%9F%E8%83%BD" class="anchor"></a>一、適應症查詢藥物功能</h2>
<div id="get-rxcui-via-maytreat" class="section level3">
<h3 class="hasAnchor">
<a href="#get-rxcui-via-maytreat" class="anchor"></a><strong>1. Get RxCui Via Maytreat</strong>
</h3>
<p>資料來源是從美國退伍軍人局<code>MED-RT</code>資料庫建立此功能，使用者透過輸入適應症可以取得其治療用的所有藥物成分。</p>
<p>範例:以輸入適應症<code>esophagitis</code>食道炎為例，可以取得食道炎所有藥物成分的RxCui，並且存在<code>Esophagitis_List</code>表中。資料欄位如下:</p>
<ul>
<li>
<code>RxCui</code> 藥物RxCui</li>
<li>
<code>Name</code> 藥物名稱</li>
<li>
<code>MinCooncept.Id</code> 適應症Id</li>
<li>
<code>MinConcept.Name</code> 適應症名稱</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">Esophagitis_List</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getRxCuiViaMayTreat.html">getRxCuiViaMayTreat</a></span><span class="op">(</span><span class="st">"esophagitis"</span><span class="op">)</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">Esophagitis_List</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">RxCui</th>
<th align="left">Name</th>
<th align="left">MinConcept.Id</th>
<th align="left">MinConcept.Name</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1792108</td>
<td align="left">Omeprazole Sodium</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
</tr>
<tr class="even">
<td align="left">236486</td>
<td align="left">Omeprazole magnesium</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
</tr>
<tr class="odd">
<td align="left">7646</td>
<td align="left">Omeprazole</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
</tr>
<tr class="even">
<td align="left">10156</td>
<td align="left">Sucralfate</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
</tr>
<tr class="odd">
<td align="left">1487143</td>
<td align="left">sucralfate malate</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
</tr>
<tr class="even">
<td align="left">17128</td>
<td align="left">lansoprazole</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="二藥物編碼轉換功能" class="section level2">
<h2 class="hasAnchor">
<a href="#%E4%BA%8C%E8%97%A5%E7%89%A9%E7%B7%A8%E7%A2%BC%E8%BD%89%E6%8F%9B%E5%8A%9F%E8%83%BD" class="anchor"></a>二、藥物編碼轉換功能</h2>
<p>本套件提供以下不同藥物詞彙表間藥物編碼轉換</p>
<ul>
<li>U.S. National Drug Code<br>
</li>
<li>NLM RxNorm<br>
</li>
<li>WHO ATC</li>
<li>台灣全民健康保險藥品編碼</li>
</ul>
<div id="get-sbd-scd-rxcui-via-rxcui" class="section level3">
<h3 class="hasAnchor">
<a href="#get-sbd-scd-rxcui-via-rxcui" class="anchor"></a><strong>1. Get SBD SCD RxCui Via RxCui</strong>
</h3>
<p>在取得<code>Esophagitis_List</code>適應症之藥物成分RxCui表後，使用者透過輸入RxCui表可以取得所有含有這些藥物成份之藥廠品牌以及臨床用藥。</p>
<p>範例:輸入<code>Esophagitis_List</code>食道炎的適應症之藥物成分RxCui表，可以取得轉換後的SBD或SCD RxCui，並且存在<code>Esophagitis_SBD_SCD_List</code>表中。資料欄位如下:</p>
<ul>
<li>
<code>RxCui</code> 藥物RxCui</li>
<li>
<code>Name</code> 藥物名稱</li>
<li>
<code>MinCooncept.Id</code> 適應症Id</li>
<li>
<code>MinConcept.Name</code> 適應症名稱</li>
<li>
<code>SBD.rxcui</code> 藥物SBD RxCui</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">Esophagitis_SBD_SCD_List</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getSBDRxCuiViaRxCui.html">getSBDRxCuiViaRxCui</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">Esophagitis_List</span><span class="op">[</span><span class="fl">3</span>,<span class="op">]</span>,
                                                    RxCuiColName <span class="op">=</span> <span class="va">RxCui</span>,
                                                    cores <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">Esophagitis_SBD_SCD_List</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">RxCui</th>
<th align="left">Name</th>
<th align="left">MinConcept.Id</th>
<th align="left">MinConcept.Name</th>
<th align="left">SBD.rxcui</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">7646</td>
<td align="left">Omeprazole</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
<td align="left">2262026</td>
</tr>
<tr class="even">
<td align="left">7646</td>
<td align="left">Omeprazole</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
<td align="left">2003656</td>
</tr>
<tr class="odd">
<td align="left">7646</td>
<td align="left">Omeprazole</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
<td align="left">198051</td>
</tr>
<tr class="even">
<td align="left">7646</td>
<td align="left">Omeprazole</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
<td align="left">199119</td>
</tr>
<tr class="odd">
<td align="left">7646</td>
<td align="left">Omeprazole</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
<td align="left">389171</td>
</tr>
<tr class="even">
<td align="left">7646</td>
<td align="left">Omeprazole</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
<td align="left">389172</td>
</tr>
</tbody>
</table>
</div>
<div id="ndc-與-rxnorm-編碼轉換" class="section level3">
<h3 class="hasAnchor">
<a href="#ndc-%E8%88%87-rxnorm-%E7%B7%A8%E7%A2%BC%E8%BD%89%E6%8F%9B" class="anchor"></a><strong>2. NDC 與 RxNorm 編碼轉換</strong>
</h3>
<div id="rxnorm-轉換為-ndc" class="section level4">
<h4 class="hasAnchor">
<a href="#rxnorm-%E8%BD%89%E6%8F%9B%E7%82%BA-ndc" class="anchor"></a><strong>2.1. RxNorm 轉換為 NDC</strong>
</h4>
<p>在取得<code>Esophagitis_SBD_SCD_List</code>適應症之藥物成分的SBD或SCD RxCui表後，使用者透過輸入SBD或SCD RxCui表可以取得所有含有這些藥物成份之NDC。但在這些藥物成份中，一個藥物會因為來自不同藥廠品牌而有不同包裝和NDC，因此輸出結果大多會產生一對多，一個藥物對上多個藥廠品牌的NDC，無相對應代碼則顯示NA。</p>
<p>範例:輸入<code>Esophagitis_SBD_SCD_List</code>食道炎的適應症之藥物成分SBD或SCD RxCui表，可以取得轉換後的NDC，並且存在<code>Esophagitis_NDC_List</code>表中。資料欄位如下:</p>
<ul>
<li>
<code>RxCui</code> 藥物RxCui</li>
<li>
<code>Name</code> 藥物名稱</li>
<li>
<code>MinCooncept.Id</code> 適應症Id</li>
<li>
<code>MinConcept.Name</code> 適應症名稱</li>
<li>
<code>SBD.rxcui</code> 藥物SBD RxCui</li>
<li>
<code>NDC</code> 藥物NDC</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">Esophagitis_NDC_List</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getNDCViaSBDRxCui.html">getNDCViaSBDRxCui</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">Esophagitis_SBD_SCD_List</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span>,
                                           SBDRxCuiColName <span class="op">=</span> <span class="va">SBD.rxcui</span>,
                                           cores <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">Esophagitis_NDC_List</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">RxCui</th>
<th align="left">Name</th>
<th align="left">MinConcept.Id</th>
<th align="left">MinConcept.Name</th>
<th align="left">SBD.rxcui</th>
<th align="left">NDC</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">7646</td>
<td align="left">Omeprazole</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
<td align="left">2262026</td>
<td align="left">NA</td>
</tr></tbody>
</table>
</div>
<div id="ndc-轉換為-rxnorm" class="section level4">
<h4 class="hasAnchor">
<a href="#ndc-%E8%BD%89%E6%8F%9B%E7%82%BA-rxnorm" class="anchor"></a><strong>2.2. NDC 轉換為 RxNorm</strong>
</h4>
<p>在取得<a href="#%E7%AF%84%E4%BE%8B%E8%B3%87%E6%96%99">sample_data_subset</a>後，使用者透過輸入NDC表可以取得所有含有這些藥物之RxNorm。</p>
<p>範例:輸入<code>sample_data_subset</code>範例資料來源，可以取得轉換後的RxNorm，並且存在<code>sample_data_subset_rxcui</code>表中。資料欄位如下:</p>
<ul>
<li>
<code>MemberId</code> 病患編號</li>
<li>
<code>DispenseDate</code> 配藥日期，時間區間為 2025-12-06 至 2038-01-25</li>
<li>
<code>NationalDrugCode</code> 藥物的美國藥物編碼(NDC)，共17,326種不同的藥物編碼</li>
<li>
<code>Quantity</code> 配藥數量(單位??)</li>
<li>
<code>DaysSupply</code> 藥物供給天數</li>
<li>
<code>RxCui</code> 藥物RxCui</li>
<li>
<code>ndcStatus</code> 藥物NDC狀態</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sample_data_subset_rxcui</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getRxCuiViaNDC.html">getRxCuiViaNDC</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">sample_data_subset</span>,
                                            NdcColName <span class="op">=</span> <span class="va">NationalDrugCode</span><span class="op">)</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">sample_data_subset_rxcui</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">MemberId</th>
<th align="left">DispenseDate</th>
<th align="left">NationalDrugCode</th>
<th align="right">Quantity</th>
<th align="right">DaysSupply</th>
<th align="left">RxCui</th>
<th align="left">ndcStatus</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">2031-12-01</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="left">606731</td>
<td align="left">ACTIVE</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">2032-01-31</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="left">606731</td>
<td align="left">ACTIVE</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">2032-03-25</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="left">606731</td>
<td align="left">ACTIVE</td>
</tr>
<tr class="even">
<td align="right">42</td>
<td align="left">2032-01-05</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="left">606731</td>
<td align="left">ACTIVE</td>
</tr>
<tr class="odd">
<td align="right">42</td>
<td align="left">2032-03-07</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="left">606731</td>
<td align="left">ACTIVE</td>
</tr>
<tr class="even">
<td align="right">42</td>
<td align="left">2032-04-30</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="left">606731</td>
<td align="left">ACTIVE</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="rxnorm-與-atc-編碼轉換" class="section level3">
<h3 class="hasAnchor">
<a href="#rxnorm-%E8%88%87-atc-%E7%B7%A8%E7%A2%BC%E8%BD%89%E6%8F%9B" class="anchor"></a><strong>3. RxNorm 與 ATC 編碼轉換</strong>
</h3>
<div id="rxnorm-轉換為-atc" class="section level4">
<h4 class="hasAnchor">
<a href="#rxnorm-%E8%BD%89%E6%8F%9B%E7%82%BA-atc" class="anchor"></a><strong>3.1. RxNorm 轉換為 ATC</strong>
</h4>
<p>在取得<code>sample_data_subset_rxcui</code>藥物之RxCui表後，使用者透過輸入RxCui表可以取得藥物之ATC，但因為在ATC中相同的藥物成份會有不同的用藥路徑和ATC，因此本套件參考<a href="https://www.researchgate.net/publication/276067397_Analyzing_US_prescription_lists_with_RxNorm_and_the_ATCDDD_Index">Bodenreider et al.</a>的研究，加入了是否同時比對用藥路徑的參數<code>MatchRoute</code>供使用者選擇，若使用者欲同時比對用藥路徑則在該參數中填入<code>TRUE</code>，若不需要則填入<code>FALSE</code>。</p>
<p>範例:輸入<code>sample_data_subset_rxcui</code>範例資料的RxCui表，是否同時比用藥路徑參數<code>MatchRoute = False</code>，可以取得轉換後的ATC，並且存在<code>sample_data_subset_atc</code>表中。資料欄位如下:</p>
<ul>
<li>
<code>MemberId</code> 病患編號</li>
<li>
<code>DispenseDate</code> 配藥日期(時間區間為 2025-12-06 至 2038-01-25)</li>
<li>
<code>NationalDrugCode(NDC)</code> 美國藥物編碼(共17,326種不同的藥物編碼)</li>
<li>
<code>Quantity</code> 發放數量</li>
<li>
<code>DaysSupply</code> 藥物供給天數</li>
<li>
<code>RxCui</code> 藥物RxCui</li>
<li>
<code>ATC</code> 藥物ATC</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sample_data_subset_atc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getATCViaRxCui.html">getATCViaRxCui</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">sample_data_subset_rxcui</span>,
                                          RxCuiColName <span class="op">=</span> <span class="va">RxCui</span>,
                                          cores <span class="op">=</span> <span class="fl">2</span>,
                                          MatchRoute <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">sample_data_subset_atc</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">MemberId</th>
<th align="left">DispenseDate</th>
<th align="left">NationalDrugCode</th>
<th align="right">Quantity</th>
<th align="right">DaysSupply</th>
<th align="left">RxCui</th>
<th align="left">ndcStatus</th>
<th align="left">ATC</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">2031-12-01</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="left">606731</td>
<td align="left">ACTIVE</td>
<td align="left">A02BC05</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">2032-01-31</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="left">606731</td>
<td align="left">ACTIVE</td>
<td align="left">A02BC05</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">2032-03-25</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="left">606731</td>
<td align="left">ACTIVE</td>
<td align="left">A02BC05</td>
</tr>
<tr class="even">
<td align="right">42</td>
<td align="left">2032-01-05</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="left">606731</td>
<td align="left">ACTIVE</td>
<td align="left">A02BC05</td>
</tr>
<tr class="odd">
<td align="right">42</td>
<td align="left">2032-03-07</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="left">606731</td>
<td align="left">ACTIVE</td>
<td align="left">A02BC05</td>
</tr>
<tr class="even">
<td align="right">42</td>
<td align="left">2032-04-30</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="left">606731</td>
<td align="left">ACTIVE</td>
<td align="left">A02BC05</td>
</tr>
</tbody>
</table>
</div>
<div id="atc-轉換為-rxnorm" class="section level4">
<h4 class="hasAnchor">
<a href="#atc-%E8%BD%89%E6%8F%9B%E7%82%BA-rxnorm" class="anchor"></a><strong>3.2. ATC 轉換為 RxNorm</strong>
</h4>
<p>使用者透過輸入ATC可以取得藥物之RxCui。</p>
<p>範例:輸入<code>AtcColName</code>的ATC，直接查詢藥物對應的RxCui，可以取得轉換後的RxCui，並且存在<code>sample_atc_rxcui</code>表中。資料欄位如下:</p>
<ul>
<li>
<code>RxCui</code> 藥物RxCui</li>
<li>
<code>ATC</code> 藥物ATC</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sample_atc_rxcui</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getRxCuiViaATC.html">getRxCuiViaATC</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">sample_ATC</span>,
                                    AtcColName <span class="op">=</span> <span class="va">ATC</span>,
                                    cores <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">sample_atc_rxcui</span><span class="op">)</span>
  <span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">ATC</th>
<th align="left">RxCui</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">G04BX06</td>
<td align="left">8120</td>
</tr>
<tr class="even">
<td align="left">D06AX02</td>
<td align="left">2348</td>
</tr>
<tr class="odd">
<td align="left">C01DA02</td>
<td align="left">4917</td>
</tr>
<tr class="even">
<td align="left">G03AB01</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">A12CC05</td>
<td align="left">142131</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="台灣藥品編碼轉換" class="section level3">
<h3 class="hasAnchor">
<a href="#%E5%8F%B0%E7%81%A3%E8%97%A5%E5%93%81%E7%B7%A8%E7%A2%BC%E8%BD%89%E6%8F%9B" class="anchor"></a><strong>4. 台灣藥品編碼轉換</strong>
</h3>
<div id="台灣醫院藥物編碼-轉換為-台灣健康保險藥物編碼" class="section level4">
<h4 class="hasAnchor">
<a href="#%E5%8F%B0%E7%81%A3%E9%86%AB%E9%99%A2%E8%97%A5%E7%89%A9%E7%B7%A8%E7%A2%BC-%E8%BD%89%E6%8F%9B%E7%82%BA-%E5%8F%B0%E7%81%A3%E5%81%A5%E5%BA%B7%E4%BF%9D%E9%9A%AA%E8%97%A5%E7%89%A9%E7%B7%A8%E7%A2%BC" class="anchor"></a><strong>4.1. 台灣醫院藥物編碼 轉換為 台灣健康保險藥物編碼</strong>
</h4>
<p>使用者透過輸入台灣任一醫院藥物編碼可以取得對應之台灣健康保險藥物編碼，若無對應之編碼則顯示<code>NA</code>。</p>
<p>範例:輸入台灣醫院藥品編碼，可以取得轉換後的台灣健康保險藥物編碼。</p>
</div>
<div id="長庚醫院藥物編碼-轉換為-台灣健康保險藥物編碼" class="section level4">
<h4 class="hasAnchor">
<a href="#%E9%95%B7%E5%BA%9A%E9%86%AB%E9%99%A2%E8%97%A5%E7%89%A9%E7%B7%A8%E7%A2%BC-%E8%BD%89%E6%8F%9B%E7%82%BA-%E5%8F%B0%E7%81%A3%E5%81%A5%E5%BA%B7%E4%BF%9D%E9%9A%AA%E8%97%A5%E7%89%A9%E7%B7%A8%E7%A2%BC" class="anchor"></a><strong>4.2. 長庚醫院藥物編碼 轉換為 台灣健康保險藥物編碼</strong>
</h4>
<p>使用者透過輸入長庚醫院藥物編碼可以取得對應之台灣健康保險藥物編碼，若無對應之編碼則顯示<code>NA</code>。</p>
<p>範例:輸入長庚醫院藥品編碼，可以取得轉換後的台灣健康保險藥物編碼。資料欄位如下:</p>
<ul>
<li>
<code>CGMH_CODE</code> 長庚醫院藥物編碼</li>
<li>
<code>NHINO1</code> 台灣健康保險藥物編碼</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span>
    <span class="fu"><a href="../reference/getNHINoViaRCFNo.html">getNHINoViaRCFNo</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">sample_taiwan_drug</span>, 
                      RCFNoColName <span class="op">=</span> <span class="va">CGMH_CODE</span><span class="op">)</span>
  <span class="op">)</span>
<span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">CGMH_CODE</th>
<th align="left">NHINO1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">P6A780M</td>
<td align="left">BC26139100</td>
</tr>
<tr class="even">
<td align="left">P6A022E</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">P6A741M</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">P6A674M</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">PBA024P</td>
<td align="left">N002967209</td>
</tr>
<tr class="even">
<td align="left">PBA024P</td>
<td align="left">A010784209</td>
</tr>
</tbody>
</table>
</div>
<div id="台灣健康保險藥品編碼-轉換為-atc" class="section level4">
<h4 class="hasAnchor">
<a href="#%E5%8F%B0%E7%81%A3%E5%81%A5%E5%BA%B7%E4%BF%9D%E9%9A%AA%E8%97%A5%E5%93%81%E7%B7%A8%E7%A2%BC-%E8%BD%89%E6%8F%9B%E7%82%BA-atc" class="anchor"></a><strong>4.3. 台灣健康保險藥品編碼 轉換為 ATC</strong>
</h4>
<p>使用者透過輸入台灣健康保險藥物編碼可以取得對應之ATC。</p>
<p>範例:輸入台灣健康保險藥物編碼，可以取得轉換後的ATC。資料欄位如下:</p>
<ul>
<li>
<code>NHINo</code> 台灣健康保險藥物編碼</li>
<li>
<code>ATC_CODE</code> 藥物ATC</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span>
    <span class="fu"><a href="../reference/getATCViaNHINo.html">getATCViaNHINo</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">sample_nhino_code</span>,
                    NHINoColName <span class="op">=</span> <span class="va">NHINo</span><span class="op">)</span>
  <span class="op">)</span>
<span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">NHINo</th>
<th align="left">ATC_CODE</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">BC26139100</td>
<td align="left">L02BX03</td>
</tr>
<tr class="even">
<td align="left">A014118335</td>
<td align="left">D07XB01</td>
</tr>
<tr class="odd">
<td align="left">BC26359100</td>
<td align="left">L01XE18</td>
</tr>
<tr class="even">
<td align="left">BC25224100</td>
<td align="left">C01BD07</td>
</tr>
<tr class="odd">
<td align="left">AC22049209</td>
<td align="left">R06AA02</td>
</tr>
<tr class="even">
<td align="left">AC45972100</td>
<td align="left">R06AX27</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="三-藥物資料分析功能" class="section level2">
<h2 class="hasAnchor">
<a href="#%E4%B8%89-%E8%97%A5%E7%89%A9%E8%B3%87%E6%96%99%E5%88%86%E6%9E%90%E5%8A%9F%E8%83%BD" class="anchor"></a>三、 藥物資料分析功能</h2>
<div id="藥物世代計算" class="section level3">
<h3 class="hasAnchor">
<a href="#%E8%97%A5%E7%89%A9%E4%B8%96%E4%BB%A3%E8%A8%88%E7%AE%97" class="anchor"></a><strong>1. 藥物世代計算</strong>
</h3>
<p>藥物世代(Drug Era)的概念(Ryan, 2010)，是將連續性的處方用藥串連成單一藥物開藥時間長度。每次病患拿藥後，根據處方之領藥時間(Dispense Date)加上處方之藥物供給時間 (Drug Supply Days) 的時間區間為一個事件(Event)。計算方式有兩種:</p>
<ol style="list-style-type: decimal">
<li><p>若病患拿藥與拿藥事件間的時間間隔(gap)大於研究者定義之間隔(persistent window)，則將此兩事件視為不同之Drug Era。</p></li>
<li><p>若小於則視為同一Drug Era。</p></li>
</ol>
<p>範例:如圖1所示，Event 1與Event 2小於定義之gap長度，視為為同一Drug Era；Event 2與Event 3大於定義之gap長度則視為不同Drug Era。此功能輸出每筆給藥紀錄之:</p>
<ul>
<li>
<code>MemberId</code> 病患編號</li>
<li>
<code>DispenseDate</code> 配藥日期(時間區間為 2025-12-06 至 2038-01-25)</li>
<li>
<code>NationalDrugCode(NDC)</code> 美國藥物編碼(共17,326種不同的藥物編碼)</li>
<li>
<code>Quantity</code> 發放數量</li>
<li>
<code>DaysSupply</code> 藥物供給天數<br>
</li>
<li>
<code>Drug Era</code> 藥物世代</li>
<li>
<code>Drug Era Start Date</code> 藥物世代起開始日期</li>
<li>
<code>Drug Era End Date</code> 藥物世代結束日期</li>
<li>
<code>Gap</code> 發藥紀錄間的時間間隔</li>
<li>
<code>Exposure Days</code> 藥物世代天數</li>
<li>
<code>Supply Days</code> 藥物世代中藥物的供給天數</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="fu"><a href="../reference/getDrugEra.html">getDrugEra</a></span><span class="op">(</span>MemberIDColName <span class="op">=</span> <span class="va">MemberId</span>,
                         <span class="va">sample_data_subset</span>,
                         DrugColName <span class="op">=</span> <span class="va">NationalDrugCode</span>,
                         DispenseDateColName <span class="op">=</span> <span class="va">DispenseDate</span>,
                         DaysSupplyColName <span class="op">=</span> <span class="va">DaysSupply</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="7%">
<col width="10%">
<col width="13%">
<col width="7%">
<col width="8%">
<col width="6%">
<col width="13%">
<col width="11%">
<col width="3%">
<col width="10%">
<col width="8%">
</colgroup>
<thead><tr class="header">
<th align="right">MemberId</th>
<th align="left">DispenseDate</th>
<th align="left">NationalDrugCode</th>
<th align="right">Quantity</th>
<th align="right">DaysSupply</th>
<th align="right">DrugEra</th>
<th align="left">DrugEraStartDate</th>
<th align="left">DrugEraEndDate</th>
<th align="right">Gap</th>
<th align="left">ExposureDays</th>
<th align="right">SupplyDays</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">2031-12-01</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="right">1</td>
<td align="left">2031-12-01</td>
<td align="left">2031-12-31</td>
<td align="right">0</td>
<td align="left">30 days</td>
<td align="right">30</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">2032-01-31</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="right">2</td>
<td align="left">2032-01-31</td>
<td align="left">2032-04-24</td>
<td align="right">0</td>
<td align="left">84 days</td>
<td align="right">60</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">2032-03-25</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="right">2</td>
<td align="left">2032-01-31</td>
<td align="left">2032-04-24</td>
<td align="right">24</td>
<td align="left">84 days</td>
<td align="right">60</td>
</tr>
<tr class="even">
<td align="right">42</td>
<td align="left">2032-03-08</td>
<td align="left">00006504031</td>
<td align="right">90</td>
<td align="right">90</td>
<td align="right">1</td>
<td align="left">2032-03-08</td>
<td align="left">2032-07-24</td>
<td align="right">0</td>
<td align="left">138 days</td>
<td align="right">180</td>
</tr>
<tr class="odd">
<td align="right">42</td>
<td align="left">2032-04-25</td>
<td align="left">00006504031</td>
<td align="right">90</td>
<td align="right">90</td>
<td align="right">1</td>
<td align="left">2032-03-08</td>
<td align="left">2032-07-24</td>
<td align="right">-42</td>
<td align="left">138 days</td>
<td align="right">180</td>
</tr>
<tr class="even">
<td align="right">42</td>
<td align="left">2032-01-05</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="right">1</td>
<td align="left">2032-01-05</td>
<td align="left">2032-02-04</td>
<td align="right">0</td>
<td align="left">30 days</td>
<td align="right">30</td>
</tr>
<tr class="odd">
<td align="right">42</td>
<td align="left">2032-03-07</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="right">2</td>
<td align="left">2032-03-07</td>
<td align="left">2032-05-30</td>
<td align="right">0</td>
<td align="left">84 days</td>
<td align="right">60</td>
</tr>
<tr class="even">
<td align="right">42</td>
<td align="left">2032-04-30</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="right">2</td>
<td align="left">2032-03-07</td>
<td align="left">2032-05-30</td>
<td align="right">24</td>
<td align="left">84 days</td>
<td align="right">60</td>
</tr>
</tbody>
</table>
</div>
<div id="定義每日劑量計算" class="section level3">
<h3 class="hasAnchor">
<a href="#%E5%AE%9A%E7%BE%A9%E6%AF%8F%E6%97%A5%E5%8A%91%E9%87%8F%E8%A8%88%E7%AE%97" class="anchor"></a><strong>2. 定義每日劑量計算</strong>
</h3>
<div id="計算每日服用的藥物量" class="section level4">
<h4 class="hasAnchor">
<a href="#%E8%A8%88%E7%AE%97%E6%AF%8F%E6%97%A5%E6%9C%8D%E7%94%A8%E7%9A%84%E8%97%A5%E7%89%A9%E9%87%8F" class="anchor"></a><strong>2.1. 計算每日服用的藥物量</strong>
</h4>
<p>使用者透過病患每日所服用的藥物量(Daily Dosage)，可針對藥物的RxNorm進行簡單的每日劑量計算，其計算方式為:</p>
<p>(該藥物之劑量 * 拿藥數量) / 藥物供給天數。</p>
<p>範例:資料欄位如下:</p>
<ul>
<li>
<code>MemberId</code> 病患編號</li>
<li>
<code>DispenseDate</code> 配藥日期(時間區間為 2025-12-06 至 2038-01-25)</li>
<li>
<code>NationalDrugCode(NDC)</code> 美國藥物編碼(共17,326種不同的藥物編碼)</li>
<li>
<code>Quantity</code> 發放數量</li>
<li>
<code>DaysSupply</code> 藥物供給天數</li>
<li>
<code>RxCui</code> 藥物RxCui</li>
<li>
<code>ATC</code> 藥物ATC</li>
<li>
<code>DailyDosage</code> 每日服用之DDD量</li>
<li>
<code>Unit</code> 單位</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sample_data_subset_atc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calDDDsViaRxCui.html">calDDDsViaRxCui</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">sample_data_subset_atc</span>, 
                                         RxCuiColName <span class="op">=</span> <span class="va">RxCui</span>, 
                                         QuantityColName <span class="op">=</span> <span class="va">Quantity</span>, 
                                         DaysSupplyColName <span class="op">=</span> <span class="va">DaysSupply</span>, 
                                         cores <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">sample_data_subset_atc</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
</div>
<div id="計算累積服用的藥物總量" class="section level4">
<h4 class="hasAnchor">
<a href="#%E8%A8%88%E7%AE%97%E7%B4%AF%E7%A9%8D%E6%9C%8D%E7%94%A8%E7%9A%84%E8%97%A5%E7%89%A9%E7%B8%BD%E9%87%8F" class="anchor"></a><strong>2.2. 計算累積服用的藥物總量</strong>
</h4>
<p>使用者透過<code>sample_data_subset_atc</code>，計算病患所有用藥時間所累積之DDD量。</p>
<p>範例:資料欄位如下:</p>
<ul>
<li>
<code>MemberId</code> 病患編號</li>
<li>
<code>DDDs</code> 累積之DDD總量</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">accumulat_DDD</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calDDDsAccumulation.html">calDDDsAccumulation</a></span><span class="op">(</span>case <span class="op">=</span> <span class="va">sample_data_subset_atc</span>, 
                                   PatientIdColName <span class="op">=</span> <span class="va">MemberId</span>,
                                   DispensingColName <span class="op">=</span> <span class="va">DispenseDate</span>,
                                   AtcCodeColName <span class="op">=</span> <span class="va">ATC</span>,
                                   DailyDosageColName <span class="op">=</span> <span class="va">DailyDosage</span>,
                                   DurationColName <span class="op">=</span> <span class="va">DaysSupply</span><span class="op">)</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">accumulat_DDD</span><span class="op">)</span></code></pre></div>
</div>
<div id="計算自訂區間服用的藥物總量" class="section level4">
<h4 class="hasAnchor">
<a href="#%E8%A8%88%E7%AE%97%E8%87%AA%E8%A8%82%E5%8D%80%E9%96%93%E6%9C%8D%E7%94%A8%E7%9A%84%E8%97%A5%E7%89%A9%E7%B8%BD%E9%87%8F" class="anchor"></a><strong>2.3. 計算自訂區間服用的藥物總量</strong>
</h4>
<p>計算病患在特定日期前後的自訂區間所累積之DDD量，使用者選擇計算DDD的時間點<code>index day</code>，可以取得在這個時間點前後多少時間區間內所累積的DDD量。</p>
<p>範例:資料欄位如下:</p>
<ul>
<li>
<code>MemberId</code> 病患編號</li>
<li>
<code>Start_day</code> 病患用藥開始日期</li>
<li>
<code>Index_Day</code> 計算DDD值的時間點</li>
<li>
<code>End_day</code> 病患用藥結束日期</li>
<li>
<code>DDDs_Before_15_Days</code> 計算DDD值的時間點前15天</li>
<li>
<code>DDDs_After_30_Days</code> 計算DDD值的時間點後30天</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">index_DDD</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calDDDsRange.html">calDDDsRange</a></span><span class="op">(</span>case <span class="op">=</span> <span class="va">sample_data_subset_atc</span>,
                           index_dayColName <span class="op">=</span> <span class="va">Index_Day</span>,
                           expo_range_before <span class="op">=</span> <span class="fl">15</span>,
                           expo_range_after <span class="op">=</span> <span class="fl">30</span>,
                           idColName <span class="op">=</span> <span class="va">MemberId</span>,
                           AtcCodeColName <span class="op">=</span> <span class="va">ATC</span>,
                           DispenseDateColName <span class="op">=</span> <span class="va">DispenseDate</span>,
                           DaysSupplyColName <span class="op">=</span> <span class="va">DaysSupply</span>,
                           DailyDosageColName <span class="op">=</span> <span class="va">DailyDosage</span><span class="op">)</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">index_DDD</span><span class="op">)</span></code></pre></div>
</div>
</div>
</div>
<div id="四-藥物資料及分析結果視覺化功能" class="section level2">
<h2 class="hasAnchor">
<a href="#%E5%9B%9B-%E8%97%A5%E7%89%A9%E8%B3%87%E6%96%99%E5%8F%8A%E5%88%86%E6%9E%90%E7%B5%90%E6%9E%9C%E8%A6%96%E8%A6%BA%E5%8C%96%E5%8A%9F%E8%83%BD" class="anchor"></a>四、 藥物資料及分析結果視覺化功能</h2>
<p>視覺化呈現以上計算後的資料結果，可以幫助使用者快速了解資料內容或是分析結果，也能快速看出資料中藥物類別的分布狀況、呈現藥物世代分析結果以及個別病患的用藥歷史。</p>
<div id="atc分布統計圖" class="section level3">
<h3 class="hasAnchor">
<a href="#atc%E5%88%86%E5%B8%83%E7%B5%B1%E8%A8%88%E5%9C%96" class="anchor"></a><strong>1. ATC分布統計圖</strong>
</h3>
<p><code>get.ATC1LevelPlot</code>功能可將以ATC編碼之藥物資料，以長條圖的方式顯示其分布狀況，此功能也提供一參數<code>level</code>讓使用者可以選擇繪製ATC編碼第一階或第二階分布。</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># level distribution 1</span>
<span class="fu"><a href="../reference/getATCLevelPlot.html">getATCLevelPlot</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">sample_data_ATC1LevelPlot</span>, 
                  ATCColName <span class="op">=</span> <span class="va">ATC</span>, 
                  level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
<p><img src="Chi_Overview_files/figure-html/unnamed-chunk-16-1.png" width="576"></p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># level distribution 2</span>
<span class="fu"><a href="../reference/getATCLevelPlot.html">getATCLevelPlot</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">sample_data_ATC1LevelPlot</span>, 
                  ATCColName <span class="op">=</span> <span class="va">ATC</span>, 
                  level <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
<p><img src="Chi_Overview_files/figure-html/unnamed-chunk-16-2.png" width="576"></p>
</div>
<div id="藥物世代長條圖" class="section level3">
<h3 class="hasAnchor">
<a href="#%E8%97%A5%E7%89%A9%E4%B8%96%E4%BB%A3%E9%95%B7%E6%A2%9D%E5%9C%96" class="anchor"></a><strong>2. 藥物世代長條圖</strong>
</h3>
<p><code>get.DrugEraPlot</code>功能，可將以<code>get.DrugEra</code>計算之藥物世代結果，以視覺化的方式呈現，其輸出結果以長條圖的方式呈現，輸入資料不同藥物供給長度的藥物世代數量，以及在各個藥物供給長度中的藥物世代裡，給藥次數的分布狀況。</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/getDrugEraPlot.html">getDrugEraPlot</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">sample_data_DrugEraPlot</span>,
                MemberIDColName <span class="op">=</span> <span class="va">MemberId</span>,
                DrugColName <span class="op">=</span> <span class="va">ATC</span>,
                DrugEraColName <span class="op">=</span> <span class="va">DrugEra</span>,
                SupplyDaysColName <span class="op">=</span> <span class="va">SupplyDays</span><span class="op">)</span></code></pre></div>
<p><img src="Chi_Overview_files/figure-html/unnamed-chunk-17-1.png" width="576"></p>
</div>
<div id="視覺化用藥歷史" class="section level3">
<h3 class="hasAnchor">
<a href="#%E8%A6%96%E8%A6%BA%E5%8C%96%E7%94%A8%E8%97%A5%E6%AD%B7%E5%8F%B2" class="anchor"></a><strong>3. 視覺化用藥歷史</strong>
</h3>
<p><code>get.DispensingPlot</code>可在藥物資料中，選擇特定的病患並將其用藥歷史做視覺化呈現，此功能也以子圖的方式將不同的藥物分開呈現。</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/getDispensingPlot.html">getDispensingPlot</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">sample_data_subset</span>, 
                   MemberIDColName <span class="op">=</span> <span class="va">MemberId</span>,
                   DrugColName <span class="op">=</span> <span class="va">NationalDrugCode</span>,
                   DispenseDateColName <span class="op">=</span> <span class="va">Dispensing</span>,
                   Member <span class="op">=</span> <span class="fl">42</span>, 
                   TimeInterval <span class="op">=</span> <span class="fl">20</span>, 
                   Unit <span class="op">=</span> <span class="va">day</span><span class="op">)</span></code></pre></div>
<p><img src="Chi_Overview_files/figure-html/unnamed-chunk-18-1.png" width="576"></p>
</div>
</div>
<div id="reference" class="section level2">
<h2 class="hasAnchor">
<a href="#reference" class="anchor"></a>Reference</h2>
<p><strong>一、適應症查詢藥物功能</strong></p>
<p>衛生福利部食品藥物管理署(2019), 藥品藥理治療分類ATC碼資料集. available at <a href="https://data.gov.tw/dataset/9119" class="uri">https://data.gov.tw/dataset/9119</a> [10 July 2019].</p>
<p>WHO(2019d), ATC/DDD Index 2018. available at <a href="https://www.whocc.no/atc_ddd_index/" class="uri">https://www.whocc.no/atc_ddd_index/</a> [10 July 2019].</p>
<p>U.S. National Library of Medicine(2019b), RxNorm API. available at <a href="https://mor.nlm.nih.gov/download/rxnav/RxNormAPIs.html#" class="uri">https://mor.nlm.nih.gov/download/rxnav/RxNormAPIs.html#</a> [10 July 2019].</p>
<p>MAYO CLINIC (2019), Esophagitis Diagnosis &amp; Treatment. available at <a href="https://www.mayoclinic.org/diseases-conditions/esophagitis/diagnosis-treatment/drc-20361264" class="uri">https://www.mayoclinic.org/diseases-conditions/esophagitis/diagnosis-treatment/drc-20361264</a> [10 July 2019].</p>
<p><strong>二、藥物編碼轉換功能</strong></p>
<p>衛生福利部中央健康保險署(2019), 全民健康保險藥品編碼原則.</p>
<p>Food and Drug Administration (2019), National Drug Code Directory. available at <a href="https://www.fda.gov/drugs/informationondrugs/ucm142438.htm" class="uri">https://www.fda.gov/drugs/informationondrugs/ucm142438.htm</a> [10 July 2019].</p>
<p>U.S. National Library of Medicine(2019c), RxNav. available at <a href="https://mor.nlm.nih.gov/RxNav/" class="uri">https://mor.nlm.nih.gov/RxNav/</a> [10 July 2019].</p>
<p>Bodenreider et al. (2014), Analyzing U.S. Prescription Lists with RxNorm and the ATC/DDD Index. AMIA … Annual Symposium proceedings. AMIA Symposium, 2014: 297–306. <a href="https://pubmed.ncbi.nlm.nih.gov/25954332/" class="uri">https://pubmed.ncbi.nlm.nih.gov/25954332/</a></p>
<p><strong>三、 藥物資料分析功能</strong></p>
<p>WHO(2019c), Guidelines for ATC Classification and DDD Assignment 2018. <a href="https://www.whocc.no/atc_ddd_index_and_guidelines/guidelines/" class="uri">https://www.whocc.no/atc_ddd_index_and_guidelines/guidelines/</a></p>
<p>Vollmer et al.(2012), Comparison of Pharmacy-Based Measures of Medication Adherence. BMC Health Services Research, 12(1): <a href="https://pubmed.ncbi.nlm.nih.gov/22691240/" class="uri">https://pubmed.ncbi.nlm.nih.gov/22691240/</a></p>
<p>Dima et al. (2017), Computation of Adherence to Medication and Visualization of Medication Histories in R with AdhereR: Towards Transparent and Reproducible Use of Electronic Healthcare Data. PLoS ONE, 12(4): 1–14. <a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0174426" class="uri">https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0174426</a></p>
<p>R Foundation (2019), R. available at <a href="https://www.r-project.org/" class="uri">https://www.r-project.org/</a></p>
<p>Bender et al. (2015), Pragmatic Trial of Health Care Technologies to Improve Adherence to Pediatric Asthma Treatment a Randomized Clinical Trial. JAMA Pediatrics, 169(4): 317–323. <a href="https://pubmed.ncbi.nlm.nih.gov/25664620/" class="uri">https://pubmed.ncbi.nlm.nih.gov/25664620/</a></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by YEHYUNG CHIU.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
