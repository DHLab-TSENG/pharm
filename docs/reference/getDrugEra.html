<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Generate Drug Era — getDrugEra • pharm</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Generate Drug Era — getDrugEra" />
<meta property="og:description" content="This is a function to calculate the drug era" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pharm</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/DHLab-TSENG/pharm/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generate Drug Era</h1>
    <small class="dont-index">Source: <a href='https://github.com/DHLab-TSENG/pharm/blob/master/R/funPharm.R'><code>R/funPharm.R</code></a>, <a href='https://github.com/DHLab-TSENG/pharm/blob/master/R/getDrugEra.R'><code>R/getDrugEra.R</code></a></small>
    <div class="hidden name"><code>getDrugEra.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This is a function to calculate the drug era</p>
    </div>

    <pre class="usage"><span class='fu'>getDrugEra</span><span class='op'>(</span>
  <span class='va'>df</span>,
  window <span class='op'>=</span> <span class='fl'>30</span>,
  MemberIDColName <span class='op'>=</span> <span class='va'>MemberID</span>,
  DrugColName <span class='op'>=</span> <span class='va'>Drug</span>,
  <span class='va'>DispenseDateColName</span>,
  <span class='va'>DaysSupplyColName</span>,
  <span class='va'>StartDateColName</span>,
  <span class='va'>EndDateColName</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>df</th>
      <td><p>data.frame with MemberID ,Drug,DispenseDate ,DaysSupply, or with MemberID ,Drug, StartDate, EndDate</p></td>
    </tr>
    <tr>
      <th>window</th>
      <td><p>allowed gap between pharmacy claims, default is 30</p></td>
    </tr>
    <tr>
      <th>DrugColName</th>
      <td><p>a column name for drug which patient use</p></td>
    </tr>
    <tr>
      <th>DispenseDateColName</th>
      <td><p>a column name for dispense date</p></td>
    </tr>
    <tr>
      <th>DaysSupplyColName</th>
      <td><p>A column for drug supply days</p></td>
    </tr>
    <tr>
      <th>StartDateColName</th>
      <td><p>a column name for patient use drug start day</p></td>
    </tr>
    <tr>
      <th>EndDateColName</th>
      <td><p>a column name for patient use drug end day</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A new data.table with following columns.</p>
<p><code>MemberId</code> patient Id</p>
<p><code>DispenseDate</code> patient`s drug dispensed date, and the time interval is from 2025-12-06 to 2038-01-25</p>
<p><code>NationalDrugCode</code> drug NDC, total of 17,326 different drug codes</p>
<p><code>Quantity</code> drug ration</p>
<p><code>DaysSupply</code> days of patient`s drug supplied</p>
<p><code>Drug Era</code> the row of medicine records belongs to the drug era</p>
<p><code>Drug Era Start Date</code> the begin date to calculate drug era</p>
<p><code>Drug Era End Date</code> the end date to calculate drug era</p>
<p><code>Gap</code> interval between each drug delivery record date and the previous medication end date</p>
<p><code>Exposure Days</code> number of days of drug era</p>
<p><code>Supply Days</code> the days of drug era that patient`s drug supplied</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Because the patient does not seek medical treatment every time to treat a specific disease, in the medication records, the continuous drug record is not necessarily the drug for the treatment of a specific disease.
The patient's medication records for the treatment of a particular disease are often scattered throughout the data, so the serialization of these discrete drug records into a continuous medication is an important step in the analysis.</p>
<p>This can be used to merge pharmacy claims data into drug era with defined window and Exposure days will be cacluated, too.
An event of the time interval is according to the prescription's dispense date plus the prescription's drug supply days.
There are two calculation models:</p>
<p>1.If the time interval gap between the patient taking the drug exceeds the persistent window, these two events are regarded as two different drug era.</p>
<p>2.If the time interval gap between the patient taking the drug less than the persistent window, these two events are regarded as same drug era.</p>
<p>This function provides user to concatenate continuous prescription medications into a single prescription length.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>#sample of calculating drug era.</span>
<span class='fu'>getDrugEra</span><span class='op'>(</span>MemberIDColName <span class='op'>=</span> <span class='va'>MemberId</span>,<span class='va'>sample_data_subset</span>,DrugColName <span class='op'>=</span> <span class='va'>NationalDrugCode</span>,DispenseDateColName <span class='op'>=</span> <span class='va'>DispenseDate</span>,DaysSupplyColName <span class='op'>=</span> <span class='va'>DaysSupply</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='error'>Error in arrange(case, MemberID, Drug, DispenseDate): 沒有這個函數 "arrange"</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by YEHYUNG CHIU.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


