<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Yeh-Yung, Chiu" />

<meta name="date" content="2021-05-06" />

<title>Eng_Overview</title>

<script src="data:application/javascript;base64,Ly8gUGFuZG9jIDIuOSBhZGRzIGF0dHJpYnV0ZXMgb24gYm90aCBoZWFkZXIgYW5kIGRpdi4gV2UgcmVtb3ZlIHRoZSBmb3JtZXIgKHRvCi8vIGJlIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3Igb2YgUGFuZG9jIDwgMi44KS4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYuc2VjdGlvbltjbGFzcyo9J2xldmVsJ10gPiA6Zmlyc3QtY2hpbGQiKTsKICB2YXIgaSwgaCwgYTsKICBmb3IgKGkgPSAwOyBpIDwgaHMubGVuZ3RoOyBpKyspIHsKICAgIGggPSBoc1tpXTsKICAgIGlmICghL15oWzEtNl0kL2kudGVzdChoLnRhZ05hbWUpKSBjb250aW51ZTsgIC8vIGl0IHNob3VsZCBiZSBhIGhlYWRlciBoMS1oNgogICAgYSA9IGguYXR0cmlidXRlczsKICAgIHdoaWxlIChhLmxlbmd0aCA+IDApIGgucmVtb3ZlQXR0cmlidXRlKGFbMF0ubmFtZSk7CiAgfQp9KTsK"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="data:text/css,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">Eng_Overview</h1>
<h4 class="author">Yeh-Yung, Chiu</h4>
<h4 class="date">2021-05-06</h4>



<div id="development-format" class="section level2">
<h2>Development Format</h2>
<div id="install-version" class="section level3">
<h3>Install Version</h3>
<p>Please install the latest Pharm package.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;devtools&quot;</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;DHLab-TSENG/pharm&quot;</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pharm)</span></code></pre></div>
</div>
<div id="sample-data" class="section level3">
<h3>Sample Data</h3>
<p>A sample data rda file <code>sample_data_subset</code> is included in Pharm package:</p>
<p>The way to generate the data table <code>sample_data</code> is to de-identify the source data which is from the US real medication records. Then, resort the order of patient Id in the original data, and time-shift the date of each administration. Next, replace the NDC in part of the administration record which has the same drug but different NDC, which means that the NDC of the drug is different in the NDC history. As a result of the data, a total of 2,747,617 dosing records and 39,989 Id numbers from different patients were generated.</p>
<p>The sample data <code>sample_data_subset</code> used in the function demonstration of this package is a subset of <code>sample_data</code> which is <code>SELECT FROM MemberId = 1 AND MemberId = 42</code>. For the field information in the data set:</p>
<ul>
<li><code>MemberId</code> patient Id</li>
<li><code>DispenseDate</code> patient`s drug dispensed date, and the time interval is from 2025-12-06 to 2038-01-25</li>
<li><code>NationalDrugCode</code> drug NDC, total of 17,326 different drug codes</li>
<li><code>Quantity</code> quantity of patient`s drug dispensed</li>
<li><code>DaysSupply</code> days of patient`s drug dispensed</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(sample_data_subset)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">MemberId</th>
<th align="left">DispenseDate</th>
<th align="left">NationalDrugCode</th>
<th align="right">Quantity</th>
<th align="right">DaysSupply</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">2031-12-01</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">2032-01-31</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">2032-03-25</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
</tr>
<tr class="even">
<td align="right">42</td>
<td align="left">2032-01-05</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
</tr>
<tr class="odd">
<td align="right">42</td>
<td align="left">2032-03-07</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
</tr>
<tr class="even">
<td align="right">42</td>
<td align="left">2032-04-30</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
</tr>
<tr class="odd">
<td align="right">42</td>
<td align="left">2032-03-08</td>
<td align="left">00006504031</td>
<td align="right">90</td>
<td align="right">90</td>
</tr>
<tr class="even">
<td align="right">42</td>
<td align="left">2032-04-25</td>
<td align="left">00006504031</td>
<td align="right">90</td>
<td align="right">90</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="i.-get-drug-ingredient-via-indication" class="section level2">
<h2>I. Get Drug Ingredient Via Indication</h2>
<div id="i.1-get-rxcui-via-maytreat" class="section level3">
<h3><strong>I.1 Get RxCui Via Maytreat</strong></h3>
<p>The source data is from the U.S. Veterans Administration’s <code>MED-RT</code> database to establish this function. User can get the RxCui of all drug ingredients for the treatment by input the indication.</p>
<p>Exmaple: User input the indication <code>esophagitis</code>, the RxCui of all drug ingredients for the treatment can be obtained and stored in the new data table <code>Esophagitis_List</code>. For the field information in the data set:</p>
<ul>
<li><code>RxCui</code> drug RxCui</li>
<li><code>Name</code> drug name</li>
<li><code>MinCooncept.Id</code> indication Id</li>
<li><code>MinConcept.Name</code> indication name</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>Esophagitis_List <span class="ot">&lt;-</span> <span class="fu">get.RxCuiViaMaytreat</span>(<span class="st">&quot;esophagitis&quot;</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(Esophagitis_List)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">RxCui</th>
<th align="left">Name</th>
<th align="left">MinConcept.Id</th>
<th align="left">MinConcept.Name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1792108</td>
<td align="left">Omeprazole Sodium</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
</tr>
<tr class="even">
<td align="left">236486</td>
<td align="left">Omeprazole magnesium</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
</tr>
<tr class="odd">
<td align="left">7646</td>
<td align="left">Omeprazole</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
</tr>
<tr class="even">
<td align="left">10156</td>
<td align="left">Sucralfate</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
</tr>
<tr class="odd">
<td align="left">1487143</td>
<td align="left">sucralfate malate</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
</tr>
<tr class="even">
<td align="left">17128</td>
<td align="left">lansoprazole</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
</tr>
</tbody>
</table>
</div>
<div id="i.2-get-sbd-scd-rxcui-via-rxcui" class="section level3">
<h3><strong>I.2 Get SBD SCD RxCui Via RxCui</strong></h3>
<p>After obtaining the data table of all drug ingredients for the treatment <code>Esophagitis_List</code>, user can get all the pharmaceutical brands and clinical drugs which has contained these drug ingredients by input the data table <code>Esophagitis_List</code>.</p>
<p>Exmaple: User input the data table <code>Esophagitis_List</code>, the converted SBD or SCD RxCui can be obtained and stored in the new data table <code>Esophagitis_SBD_SCD_List</code>. For the field information in the data set:</p>
<ul>
<li><code>RxCui</code> drug RxCui</li>
<li><code>Name</code> drug name</li>
<li><code>MinCooncept.Id</code> indication Id</li>
<li><code>MinConcept.Name</code> indication name</li>
<li><code>SBD.rxcui</code> drug SBD RxCui</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>Esophagitis_SBD_SCD_List <span class="ot">&lt;-</span> <span class="fu">get.SbdScdRxCuiViaRxCui</span>(<span class="at">df =</span> Esophagitis_List[<span class="dv">3</span>,],</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>                                                    <span class="at">RxCuiColName =</span> RxCui,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>                                                    <span class="at">cores =</span> <span class="dv">2</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(Esophagitis_SBD_SCD_List)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">RxCui</th>
<th align="left">Name</th>
<th align="left">MinConcept.Id</th>
<th align="left">MinConcept.Name</th>
<th align="left">SBD.rxcui</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">7646</td>
<td align="left">Omeprazole</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
<td align="left">2262026</td>
</tr>
<tr class="even">
<td align="left">7646</td>
<td align="left">Omeprazole</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
<td align="left">2003656</td>
</tr>
<tr class="odd">
<td align="left">7646</td>
<td align="left">Omeprazole</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
<td align="left">198051</td>
</tr>
<tr class="even">
<td align="left">7646</td>
<td align="left">Omeprazole</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
<td align="left">199119</td>
</tr>
<tr class="odd">
<td align="left">7646</td>
<td align="left">Omeprazole</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
<td align="left">389171</td>
</tr>
<tr class="even">
<td align="left">7646</td>
<td align="left">Omeprazole</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
<td align="left">389172</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="ii.-drug-code-integration" class="section level2">
<h2>II. Drug Code Integration</h2>
<p>Pharm package provides the following drug code conversion:</p>
<ul>
<li>U.S. National Drug Code(NDC)</li>
<li>NLM RxNorm(RxCui)</li>
<li>Semantic Branded Drug(SBD) or Semantic Clinical Drug(SCD)</li>
<li>WHO Anatomical Therapeutic Chemical Classification System(ATC)</li>
<li>Taiwan Health Insurance drug code(NHINo)</li>
<li>Hospital Code(HC)</li>
<li>Chang Gung Medical Hospital drug code(RCFNo)</li>
</ul>
<div id="ii.1-ndc-and-rxnorm-conversion" class="section level3">
<h3><strong>II.1 NDC and RxNorm conversion</strong></h3>
<div id="ii.1.1-get-ndc-via-sbd-rxcui" class="section level4">
<h4><strong>II.1.1 Get NDC via SBD RxCui</strong></h4>
<p>After obtaining the data table of all drug ingredient SBD or SCD RxCui <code>Esophagitis_SBD_SCD_List</code>, user can get NDC which has contained these drug ingredients by input the data table <code>Esophagitis_SBD_SCD_List</code>. However, a drug will have different packaging and NDC because it comes from different pharmaceutical brands. There will be different NDC for the same drug type but different packaging. Hence, the output results will be one-to-many. A drug RxCui will matche to multiple NDC of pharmaceutical brands, and no corresponding NDC will be<code>NA</code>. This function provides user to get NDC via SBD or SCD RxCui.</p>
<p>Exmaple: User input the data table <code>Esophagitis_SBD_SCD_List</code>, the converted NDC can be obtained and stored in the new data table <code>Esophagitis_NDC_List</code>. For the field information in the data set:</p>
<ul>
<li><code>RxCui</code> drug RxCui</li>
<li><code>Name</code> drug name</li>
<li><code>MinCooncept.Id</code> indication Id</li>
<li><code>MinConcept.Name</code> indication name</li>
<li><code>SBD.rxcui</code> drug SBD RxCui</li>
<li><code>NDC</code> drug NDC</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>Esophagitis_NDC_List <span class="ot">&lt;-</span> <span class="fu">get.NdcViaSBDrxcui</span>(<span class="at">df =</span> Esophagitis_SBD_SCD_List[<span class="dv">1</span>,],</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">SBDRxCuiColName =</span> SBD.rxcui,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">cores =</span> <span class="dv">2</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(Esophagitis_NDC_List)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">RxCui</th>
<th align="left">Name</th>
<th align="left">MinConcept.Id</th>
<th align="left">MinConcept.Name</th>
<th align="left">SBD.rxcui</th>
<th align="left">NDC</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">7646</td>
<td align="left">Omeprazole</td>
<td align="left">D004941</td>
<td align="left">Esophagitis</td>
<td align="left">2262026</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
</div>
<div id="ii.1.2-get-rxcui-via-ndc" class="section level4">
<h4><strong>II.1.2 Get RxCui via NDC</strong></h4>
<p>After obtaining</p>
<p>在取得<code>sample_data_subset</code>表後，使用者透過輸入NDC表可以取得所有含有這些藥物之RxNorm。</p>
<p>範例:輸入<code>sample_data_subset</code>範例資料來源，可以取得轉換後的RxNorm，並且存在<code>sample_data_subset_rxcui</code>表中。資料欄位如下:</p>
<ul>
<li><code>MemberId</code> 病患編號</li>
<li><code>DispenseDate</code> 配藥日期，時間區間為 2025-12-06 至 2038-01-25</li>
<li><code>NationalDrugCode</code> 藥物的美國藥物編碼(NDC)，共17,326種不同的藥物編碼</li>
<li><code>Quantity</code> 配藥數量(單位??)</li>
<li><code>DaysSupply</code> 藥物供給天數</li>
<li><code>RxCui</code> 藥物RxCui</li>
<li><code>ndcStatus</code> 藥物NDC狀態</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>sample_data_subset_rxcui <span class="ot">&lt;-</span> <span class="fu">get.RxCuiViaNdc</span>(<span class="at">df =</span> sample_data_subset,</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>                                            <span class="at">NdcColName =</span> NationalDrugCode)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(sample_data_subset_rxcui))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">MemberId</th>
<th align="left">DispenseDate</th>
<th align="left">NationalDrugCode</th>
<th align="right">Quantity</th>
<th align="right">DaysSupply</th>
<th align="left">RxCui</th>
<th align="left">ndcStatus</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">2031-12-01</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="left">606731</td>
<td align="left">ACTIVE</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">2032-01-31</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="left">606731</td>
<td align="left">ACTIVE</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">2032-03-25</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="left">606731</td>
<td align="left">ACTIVE</td>
</tr>
<tr class="even">
<td align="right">42</td>
<td align="left">2032-01-05</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="left">606731</td>
<td align="left">ACTIVE</td>
</tr>
<tr class="odd">
<td align="right">42</td>
<td align="left">2032-03-07</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="left">606731</td>
<td align="left">ACTIVE</td>
</tr>
<tr class="even">
<td align="right">42</td>
<td align="left">2032-04-30</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="left">606731</td>
<td align="left">ACTIVE</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="rxnorm-與-atc-編碼轉換" class="section level3">
<h3><strong>2.2 RxNorm 與 ATC 編碼轉換</strong></h3>
<div id="rxnorm-轉換為-atc" class="section level4">
<h4><strong>2.2.1 RxNorm 轉換為 ATC</strong></h4>
<p>在取得<code>sample_data_subset_rxcui</code>藥物之RxCui表後，使用者透過輸入RxCui表可以取得藥物之ATC，但因為在在ATC中相同的藥物成份會有不同的用藥路徑和ATC編碼，因此本套件參考<a href="https://www.researchgate.net/publication/276067397_Analyzing_US_prescription_lists_with_RxNorm_and_the_ATCDDD_Index">Bodenreider et al.</a>的研究，加入了是否同時比對用藥路徑的參數<code>MatchRoute</code>供使用者選擇，若使用者欲同時比對用藥路徑則在該參數中填入<code>TRUE</code>，若不需要則填入<code>FALSE</code>。</p>
<p>範例:輸入<code>sample_data_subset_rxcui</code>範例資料的RxCui表，是否同時比用藥路徑參數<code>MatchRoute</code> = <code>False</code>，可以取得轉換後的ATC，並且存在<code>sample_data_subset_atc</code>表中。資料欄位如下:</p>
<ul>
<li><code>MemberId</code> 病患編號</li>
<li><code>DispenseDate</code> 配藥日期(時間區間為 2025-12-06 至 2038-01-25)</li>
<li><code>NationalDrugCode(NDC)</code> 美國藥物編碼(共17,326種不同的藥物編碼)</li>
<li><code>Quantity</code> 發放數量</li>
<li><code>DaysSupply</code> 藥物供給天數</li>
<li><code>RxCui</code> 藥物RxCui</li>
<li><code>ATC</code> 藥物ATC</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>sample_data_subset_atc <span class="ot">&lt;-</span> <span class="fu">get.AtcViaRxCui</span>(<span class="at">df =</span> sample_data_subset_rxcui,</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">RxCuiColName =</span> RxCui,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">cores =</span> <span class="dv">2</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">MatchRoute =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(sample_data_subset_atc)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">MemberId</th>
<th align="left">DispenseDate</th>
<th align="left">NationalDrugCode</th>
<th align="right">Quantity</th>
<th align="right">DaysSupply</th>
<th align="left">RxCui</th>
<th align="left">ATC</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">2031-12-01</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="left">606731</td>
<td align="left">A02BC05</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">2032-01-31</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="left">606731</td>
<td align="left">A02BC05</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">2032-03-25</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="left">606731</td>
<td align="left">A02BC05</td>
</tr>
<tr class="even">
<td align="right">42</td>
<td align="left">2032-01-05</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="left">606731</td>
<td align="left">A02BC05</td>
</tr>
<tr class="odd">
<td align="right">42</td>
<td align="left">2032-03-07</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="left">606731</td>
<td align="left">A02BC05</td>
</tr>
<tr class="even">
<td align="right">42</td>
<td align="left">2032-04-30</td>
<td align="left">00186504031</td>
<td align="right">30</td>
<td align="right">30</td>
<td align="left">606731</td>
<td align="left">A02BC05</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
